[gd_resource type="ShaderMaterial" load_steps=3 format=2]

[ext_resource path="res://sprites/freeze_overlay.png" type="Texture" id=1]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

uniform sampler2D overlay_texture;
uniform float  effect_progress;
uniform vec2 tiled_factor = vec2(0.5, 0.5);
uniform float tint_amount;
uniform float overlay_amount;

uniform vec3 target_color;

void fragment(){
	vec2 tiled_uvs = UV * tiled_factor;
	vec4 base_pixel = texture(TEXTURE, UV);
	vec3 overlay_pixel = texture(overlay_texture, tiled_uvs).rgb;
	COLOR = vec4(mix(mix(base_pixel.rgb, base_pixel.bbb, tint_amount*pow(effect_progress, 4)), overlay_pixel, overlay_amount*pow(effect_progress, 4)), base_pixel.a);
}
//vec3(0.49, 0.82, 96)"

[resource]
shader = SubResource( 1 )
shader_param/effect_progress = 0.0
shader_param/tiled_factor = Vector2( 0.5, 0.5 )
shader_param/tint_amount = 0.5
shader_param/overlay_amount = 0.7
shader_param/target_color = null
shader_param/overlay_texture = ExtResource( 1 )
